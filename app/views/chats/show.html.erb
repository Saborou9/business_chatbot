<%= turbo_frame_tag "chat_content" do %>
  <div class="p-4 h-full flex flex-col">
    <h1 class="font-bold text-2xl mb-4"><%= @chat.title %></h1>

    <div id="messages" class="flex-grow overflow-y-auto mb-4 space-y-2">
      <% @chat.messages.order(:created_at).each do |message| %>
        <div class="bg-gray-100 p-2 rounded-md">
          <p class="text-sm text-gray-700"><%= message.context %></p>
          <small class="text-xs text-gray-500"><%= message.user.email %> at <%= message.created_at.strftime("%H:%M") %></small>
        </div>
      <% end %>
      
      <% if @chat.messages.empty? %>
        <p class="text-gray-500 text-center">No messages yet</p>
      <% end %>
    </div>

    <div class="mt-auto border-t pt-4">
      <%= form_with(model: [@chat, Message.new], local: false, class: "flex space-x-2", id: "new_message") do |f| %>
        <%= f.text_area :context, 
            placeholder: "Type your message...", 
            rows: 1, 
            class: "flex-grow resize-none rounded-md border border-gray-300 p-2 focus:outline-none focus:ring-2 focus:ring-blue-500" %>
        
        <%= f.submit "Send", 
            class: "bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-md transition duration-300" %>
      <% end %>
    </div>
  </div>
<% end %>
